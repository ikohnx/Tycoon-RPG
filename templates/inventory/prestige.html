{% extends "core/base.html" %}

{% block title %}Prestige - Business Tycoon RPG{% endblock %}

{% block body_class %}world-{{ stats.world|lower }}{% endblock %}

{% block content %}
<div class="row fade-in">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="game-title"><i class="bi bi-gem"></i> Prestige System</h2>
            <a href="{{ url_for('core.hub') }}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Back to HQ
            </a>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4" style="border: 2px solid rgba(138,43,226,0.4);">
                    <div class="card-header" style="background: linear-gradient(180deg, rgba(138,43,226,0.3), transparent);">
                        <i class="bi bi-gem"></i> Current Prestige Status
                    </div>
                    <div class="card-body text-center">
                        <div class="mb-4">
                            <i class="bi bi-gem" style="font-size: 5rem; color: #8a2be2; filter: drop-shadow(0 0 20px rgba(138,43,226,0.5));"></i>
                        </div>
                        
                        <h2 class="gold-text mb-3">Prestige Level {{ prestige_status.prestige_level }}</h2>
                        
                        <div class="row g-3 mb-4">
                            <div class="col-6">
                                <div class="stat-card" style="border-color: rgba(80,200,120,0.3);">
                                    <small class="text-muted">EXP Multiplier</small>
                                    <div class="h4 text-success mb-0">x{{ "%.1f"|format(prestige_status.exp_multiplier) }}</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="stat-card" style="border-color: rgba(255,215,0,0.3);">
                                    <small class="text-muted">Gold Multiplier</small>
                                    <div class="h4 text-warning mb-0">x{{ "%.2f"|format(prestige_status.gold_multiplier) }}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card mb-3">
                            <small class="text-muted">Total Prestiges Completed</small>
                            <div class="h5 text-info mb-0">{{ prestige_status.total_prestiges }}</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card mb-4" style="border: 2px solid rgba(255,215,0,0.3);">
                    <div class="card-header" style="background: linear-gradient(180deg, rgba(255,215,0,0.2), transparent);">
                        <i class="bi bi-arrow-up-circle-fill"></i> Prestige Ascension
                    </div>
                    <div class="card-body">
                        <h5 class="gold-text mb-3">Requirements</h5>
                        
                        <div class="stat-card mb-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <span>Total Discipline Levels</span>
                                <span class="{% if prestige_status.can_prestige %}text-success{% else %}text-danger{% endif %}">
                                    {{ prestige_status.total_levels }} / {{ prestige_status.levels_needed }}
                                </span>
                            </div>
                            <div class="progress mt-2">
                                <div class="progress-bar" style="width: {{ (prestige_status.total_levels / prestige_status.levels_needed * 100)|min(100) }}%;"></div>
                            </div>
                        </div>
                        
                        <h5 class="gold-text mb-3 mt-4">Rewards</h5>
                        
                        <div class="stat-card mb-2" style="border-color: rgba(80,200,120,0.3);">
                            <div class="d-flex justify-content-between">
                                <span><i class="bi bi-graph-up-arrow text-success"></i> EXP Bonus</span>
                                <span class="text-success">+{{ (prestige_status.next_exp_bonus * 100)|int }}%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card mb-4" style="border-color: rgba(255,215,0,0.3);">
                            <div class="d-flex justify-content-between">
                                <span><i class="bi bi-coin text-warning"></i> Gold Bonus</span>
                                <span class="text-warning">+{{ (prestige_status.next_gold_bonus * 100)|int }}%</span>
                            </div>
                        </div>
                        
                        <div class="alert alert-warning small mb-3">
                            <i class="bi bi-exclamation-triangle-fill"></i> <strong>Warning:</strong> Prestiging will reset:
                            <ul class="mb-0 mt-2">
                                <li>All discipline levels back to 1</li>
                                <li>All completed scenarios</li>
                                <li>Your gold back to $10,000</li>
                                <li>Reputation back to 50</li>
                            </ul>
                        </div>
                        
                        {% if prestige_status.can_prestige %}
                        <form action="{{ url_for('inventory.perform_prestige') }}" method="POST" onsubmit="return confirm('Are you sure you want to prestige? This will reset your progress!');">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" class="btn btn-game btn-game-purple w-100">
                                <i class="bi bi-gem"></i> Prestige Now!
                            </button>
                        </form>
                        {% else %}
                        <button class="btn btn-secondary w-100" disabled>
                            <i class="bi bi-lock-fill"></i> Need {{ prestige_status.levels_needed - prestige_status.total_levels }} More Levels
                        </button>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
